<!DOCTYPE html>
<html lang="en">
    <head>
        <title> This is the home page </title>
        <!-- <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" /> -->
        <script defer src="https://pyscript.net/alpha/pyscript.js"></script>

        <py-env>
            - airtable
        </py-env>

    </head>
    <body>
        <hr>
        <p> 1. the first tweet </p>
        <div class="btn-group">
            <input type="radio" name="Choices1" id="Democrate" values="Democrate"> 
            <label for="Democrates"> Democrate </label>

            <input type="radio" name="Choices1" id="Repblican" values="Repblican"> 
            <label for="Democrates"> Repblican </label>

            <input type="radio" name="Choices1" id="Independent" values="Independent"> 
            <label for="Democrates"> Independent </label>

            <input type="radio" name="Choices1" id="Others" values="Others"> 
            <label for="Democrates"> Others </label>

        </p>
        <hr>
        
        <p> 2. the second tweet </p>
        <div class="btn-group">
            <input type="radio" name="Choices2" id="Democrate" values="Democrate"> 
            <label for="Democrates"> Democrate </label>

            <input type="radio" name="Choices2" id="Repblican" values="Repblican"> 
            <label for="Democrates"> Repblican </label>

            <input type="radio" name="Choices2" id="Independent" values="Independent"> 
            <label for="Democrates"> Independent </label>

            <input type="radio" name="Choices2" id="Others" values="Others"> 
            <label for="Democrates"> Others </label>

        </p>
        <hr>

        <p>
          <button id="submitButton" type="Submit" > Submit </button> 
          <py-script>
            from js import document 
            from pyodide import create_proxy

            from airtable import Airtable

            base_id = "app0HYDUVfrBVLFV2"
            table_name = "ex_tweets"
            api_key = "keyQUcYkOoAkjWXTV"

            airtable = Airtable(base_id, table_name, api_key)

            def insert(x):
                print("i am here")
                print(airtable)
                <!-- insertData = airtable.insert({'Name': 'czh'}) -->
                record = airtable.match("Name", "name1")
                fields = {"INT":200}
                <!-- airtable.replace(record["id"], fields) -->
                airtable.update(record["id"], fields)
                <!-- airtable.update() -->
            
            function_proxy = create_proxy(insert)
            
            document.getElementById("submitButton").addEventListener("click", function_proxy)
            </py-script>
        </p>

    </body>
</html>